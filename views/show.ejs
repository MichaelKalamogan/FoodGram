<!DOCTYPE html>
<html>
    <%- include('./partials/head') %>
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">

    <body>
        <%- include('./partials/nav') %>

        <div class="row after-navbar">

            <div>
                <div class="row">
                    <h1 id="main-name" style="margin-bottom: 20px;"><%=recipe.name%></h1>
                </div>
                <div class="row" id="show-header-container">

                    <div class="col-md-8 ms-10">
                        <img src="<%=recipe.image%>" alt=".." id="show-image"/>
                        
                        <div class="row" id="show-image">                        
                            <ul class="snapshot">
                                <li class="show-snapshot"><span class="iconify" data-icon="bx:bxs-user" data-inline="true"></span><span><%=recipe.serves%> </span></li>
                                <li class="show-snapshot"><span class="iconify" data-icon="ant-design:clock-circle-outlined" data-inline="true"></span><span><%=recipe.time%></span></li>
                                <% if(recipe.difficulty === 'Easy') { %>
                                <li class="show-snapshot" ><span class="iconify" data-icon="mdi:signal-cellular-1" data-inline="true"></span><span><%=recipe.difficulty%></span></li>
                                <% } else if(recipe.difficulty === 'Medium') { %>
                                    <li class="show-snapshot"><span class="iconify" data-icon="mdi:signal-cellular-2" data-inline="true"></span><span><%=recipe.difficulty%></span></li>
                                <% } else if(recipe.difficulty === 'Hard') { %>
                                    <li class="show-snapshot"><span class="iconify" data-icon="mdi:signal-cellular-3" data-inline="true"></span><span><%=recipe.difficulty%></span></li>
                                <% } %>
                                
                                <% if(recipe.reviews.length > 0) { %>
                                    <% let reviews = recipe.reviews %>
                                    <% let averageReviews = 0 %>
                                    <% reviews = reviews.reduce(function(a, b){ %>
                                    <% return a + b; %>
                                    <% }, 0) %>
                                    <% averageReviews = sumReviews/reviews.length %>                        
                                    <li class="show-snapshot"><span><%= averageReviews %></span></li>
                            
                                <% } %>                            
                            </ul>   
                        </div>
                    </div>
                    

                    <div class="col-md-3 mb-3">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <img src="/Images/chef.png" alt="Admin" class="square" width="150">
                                    <div class="mt-3">
                                        <h4><%=userReq.user_id%></h4>
                                        <button class="btn btn-primary">Follow</button>
                                        <button class="btn btn-outline-primary">Message</button>
                                    </div>
                                </div>
                                <div class="social-icons">
                                    <ul>
                                        <%if (userReq.website) { %>
                                            <li><a href="<% userReq.website %>"><span class="iconify" data-icon="dashicons:admin-site-alt" data-inline="true"></span></a></li>
                                        <% } %>
                                        <%if (userReq.facebook) { %>
                                            <li><a href="<% userReq.facebook %>"><span class="iconify" data-icon="bx:bxl-facebook" data-inline="true" style="color:#4267B2"></span></a></li>
                                        <% } %>
                                        <%if (userReq.instagram) { %>
                                            <li><a href="<% userReq.instagram %>"><span class="iconify" data-icon="bx:bxl-instagram" data-inline="true" style="color:black"></span></a></li>
                                        <% } %>
                                        <%if (userReq.pinterest) { %>
                                            <li><a href="<% userReq.pinterest %>"><span class="iconify" data-icon="bx:bxl-pinterest" data-inline="true" style="color:#E60023"></span></a></li>
                                        <% } %>
                                    </ul>
                                </div> 
                            </div>
                        </div>
                    </div>
                </div>
            
            </div>    
        </div>
            

        <div class="row mt-10" id="ingredient-instructions">
                
            <div class="col-md-4" style="margin-right: 30px;">
                <h2 class="show-header">Ingredients List</h2>
                <ul style="padding: 0; text-align: justify;">
                    <%for(let i=0; i < recipe.ingredient.length; i++) { %>
                        <li style="list-style: none; margin-bottom: 10px;"><%= recipe.ingredient[i].item %></li>
                    <% } %>
                    </ul>
            </div>
    
            <div class="col-md-4">
                <h2 class="show-header"> How To Cook</h2>
                <ol style="text-align: justify;">
                <%for(let j=0; j < recipe.instruction.length; j++) { %>
                     <li style="margin-bottom: 10px;"><%= recipe.instruction[j].toDo %></li>
                <% } %>
                </ol>
        
            </div>
        </div>
        
    </body>

</html>